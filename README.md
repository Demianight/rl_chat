# rl_chat

**rl_chat** — это простейший real-time чат, созданный как тестовое задание. Проект включает авторизацию и минимальные требования для того, чтобы называться чатом. Это мой первый РЕАЛЬНЫЙ опыт работы с WebSocket-ами, фронтенд был разработан при помощи ChatGPT, но отредактирован под мои нужды.

## Основные особенности проекта
- **WebSocket**: Реализована простая система чата с использованием WebSocket.
- **Авторизация**: Пользователи могут регистрироваться и получать JWT токены для доступа к чату.
- **Минимальные требования**: Основной функционал чата реализован с минимальными требованиями для тестового задания.
- **Структура проекта**: Все модели приложения собраны в одном файле для упрощения работы с импортами, но при необходимости их можно вынести в отдельные модули.
- **Фронтенд**: Разработан с помощью ChatGPT и адаптирован мной для проекта. Он доступен по адресу: http://127.0.0.1:8000/frontend/.
- **Тестовый бот**: В проект интегрирован телеграм-бот, который уведомляет о новых сообщениях. Он написан в одну функцию для простоты. Если хотите увидеть более качественного бота, посмотрите [manga_bot](https://github.com/Demianight/manga_bot).
- **База данных**: Проект использует PostgreSQL, а так же Alembic для миграций.
- **Технологический стек**:
  - Python 3.12
  - FastAPI
  - Redis + Celery
  - aiogram
  - JWT + bcrypt для токенов
  - Poetry для управления зависимостями и инициации проекта.

## Установка и запуск

1. Поднимите Docker контейнеры:
    ```bash
    docker-compose up --build -d
    ```

2. Запустите Celery:
    ```bash
    poetry run celery -A rl_chat.tasks worker --loglevel=info
    ```

3. Запустите приложение (перед этим в .env закиньте токен от своего бота):
    ```bash
    poetry run uvicorn rl_chat.main:app --host 127.0.0.1 --port 8000 --reload
    ```

4. Фронтенд станет доступен по адресу: [http://127.0.0.1:8000/frontend/](http://127.0.0.1:8000/frontend/)

Чтобы протестировать чат, можно открыть два разных браузера и войти с разных аккаунтов.

## Баги и оговорки

- **rl_chat модуль**: Содержит общие вещи для всех приложений, но структура этого модуля далека от идеала. Это временное решение для тестового проекта.
- **.env файл в репозитории**: Он добавлен исключительно из-за тестового характера проекта, в продакшене его конечно не было бы.
- **Баги фронтенда**: При переходе между чатами старые сообщения не обновляются, а просто добавляются в конец.
- **Статус online**: Пользователь считается онлайн, если зашел хотя бы в один чат.
- **Телеграм-бот**: Написан в одну функцию для уведомлений. Это упрощенная версия, более сложный и качественно написанный бот можно найти [здесь](https://github.com/Demianight/manga_bot).
- **Git**: Я абсолютно забыл про коммиты
- **Написан за 4 дня**: Если исключать дни когда я не работал над проектом

## Дополнительные ресурсы

Если вас интересуют проекты с более комплексной работой с аутентификацией и токенами, а также асинхронной работой с базами данных с довольно непростой структурой, посмотрите мой проект: [ad_looper](https://github.com/Demianight/ad_looper).

Если вам нужен хорошо структурированный и комплексный тг-бот: [manga_bot](https://github.com/Demianight/manga_bot)
